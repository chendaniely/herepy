[tox]
env_list = lint, format, type, py{37,38,39,310,311}
minversion = 4.4.7

[testenv]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps = pytest>=6.2.5
basepython =
    lint: python3.11
    format: python3.11
    type: python3.11
commands = pytest {tty:--color=yes} {posargs}

[testenv:lint]
description = run flake8
skip_install = true
deps = flake8~=3.8.4
commands = flake8 {posargs:src/pyprojroot tests}

[testenv:format]
description = run black
deps = black~=19.3b0
skip_install = true
commands = black --check --diff src/pyprojroot tests

[testenv:type]
description = run type checks
deps = mypy~=0.720
commands = mypy --strict {posargs:src/pyprojroot}

[gh-actions]
python =
    3.7: py37
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311, lint, format, type
